<p id="notice"><%= notice %></p>

<%= link_to 'New Photo challenge', new_photo_challenge_path %>
<br>

<% @photo_challenges.each do |photo_challenge| %>
  <a href="#<%= photo_challenge.id %>"><%= photo_challenge.title %></a>
<% end %>

<% if @photo_challenges.any? %>
  <% @photo_challenges.each do |photo_challenge| %>
    <div id="<%= photo_challenge.id %>">
      <%= photo_challenge.title %>
      <% if photo_challenge.photos.any? %>
        <% if photo_challenge.winning_photo  %>
          <h3>Winning Photo</h3>
          <%= image_tag(photo_challenge.winning_photo.photo.picture_url) %>
        <% end %>
        <% photo_challenge.photos[0...4].each do |photo| %>
          <% next if photo_challenge.winning_photo && photo_challenge.winning_photo.photo.id == photo.id %>
          <% if photo_challenge.photos.length > 4 %>
            <%= image_tag(photo_challenge.photos[5].picture_url) %>
          <% else %>
            <%= image_tag(photo.picture_url) %>
          <% end %>
        <% end %>
        <%= link_to "View all photos associated with #{photo_challenge.title}", photo_challenge_gallery_path(photo_challenge.id) %>
      <% else %>
        <h5>No images available</h5>
      <% end %>
    </div>
  <% end %>
<% else %>
  <h5>No Photo Challenges found</h5>
<% end %>

